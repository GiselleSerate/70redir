<!DOCTYPE html>
<html>
<head>
    <title>CS 70 Grutoring Queue Redirect</title>
    <script>
        // The queue will be active for these hours.
        // Note if 1 is listed as an active hour, the queue will close at 2. 
        var schedule = {
            // Saturday, 11-3, 7-9
            6: {
                11: true,
                12: true,
                13: true,
                14: true,
                19: true, // 7
                20: true,
            },
            // Sunday, 11-3, 7-9
            0: {
                11: true,
                12: true,
                13: true,
                14: true,
                19: true, // 7
                20: true,
            },
            // Monday, 6-11
            1: {
                18: true,
                19: true,
                20: true,
                21: true,
            },
            // Tuesday, 6-11
            2: {
                18: true,
                19: true,
                20: true,
                21: true,
            },
            // Wednesday, 6-10
            2: {
                18: true,
                19: true,
                20: true,
            },
        }

        var numToDay = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];

        // Redirects if we are within scheduled grutoring hours.
        function checkSchedule() {
            var date = new Date();
            var day = date.getDay();
            var hour = date.getHours();

            console.log("Schedule checked. Today is " + day + " and the hour is " + hour + ".");
            if (day in schedule && hour in schedule[day]) {
                window.location.assign("https://docs.google.com/forms/d/e/1FAIpQLSd4uV3FICjYIDCnAeQYtDOWrL1dQOyuwmD76CXuO_gSjnv6wQ/viewform");
            }
            populateSchedule(); // TODO: well heck, guess we'll do this. 
        }

        // Convert time to AM/PM string.
        function convertTime(time) {
            ampm = "AM";
            if(time > 12) {
                time = time - 12;
                ampm = "PM";
            }
            return time+":00 "+ampm;
        }

        function populateSchedule() {
            console.log("Populating schedule.");
            var scheduleDiv = document.getElementById("schedule");
            console.log(scheduleDiv);
            for (day in schedule) {
                var newDay = "<div>"
                // Add header
                newDay += "<div class=sched-header>"+numToDay[day]+"</div>";
                for (time in schedule[day]) {
                    newDay += "<div>"+convertTime(time)+"</div>";
                }
                newDay += "</div>";
                scheduleDiv.innerHTML += newDay;
            }
        }

        window.onload = checkSchedule;
    </script>
    <style>
        #schedule {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
        }
        .sched-header {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>
        Looking for the CS 70 digital queue?
    </h1>
    <p>
        Unfortunately, the grutors aren't scheduled to be in the labs right now. If there are any grutors in the labs, they're working overtime--be sure to thank them! (And maybe suggest that they take care of themselves and go home.)
    </p>
    <p>
        The queue will be back soon! 
    </p>
    <div id="schedule" onload="populateSchedule();"></div>
    <p>
        (If you're seeing this page and it's actually during grutoring hours, please email <a href="mailto:gserate@g.hmc.edu">gserate@g.hmc.edu</a> so it can be fixed in a timely manner.)
    </p>
</body>
</html>


